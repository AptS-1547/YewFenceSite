.mgmt-wrapper {
    /* 局部主题变量（仅管理页使用） */
    --mgmt-mask-bg: rgba(0, 0, 0, .35);
    --mgmt-edit-mask-bg: rgba(0, 0, 0, .45);
    --mgmt-status-published-ink: #177245;
    --mgmt-status-hidden-ink: #a15c00;
    /* 状态色的不透明度（用于边框/背景的混色强度） */
    --mgmt-status-border-alpha: 80%;
    --mgmt-status-bg-alpha: 94%;
    /* 文件按钮配色（使用全局的强调色做基础） */
    --mgmt-file-button-bg: var(--color-accent);
    --mgmt-file-button-bg-hover: var(--color-accent-hover);
    --mgmt-file-button-bg-active: color-mix(in oklab, var(--color-accent), #000 15%);

    min-height: calc(100vh - var(--header--height));
    padding: 2rem 0;
    background: var(--surface-bg);
}

/* 夜间模式下的管理页局部变量优化（仅管理页生效） */
html[data-theme="dark"] .mgmt-wrapper {
    --mgmt-mask-bg: rgba(0, 0, 0, .55);
    --mgmt-edit-mask-bg: rgba(0, 0, 0, .6);
    /* 增加可视对比度，让边框/背景在深色下更清晰 */
    --mgmt-status-border-alpha: 65%;
    --mgmt-status-bg-alpha: 88%;
    --mgmt-file-button-bg-active: color-mix(in oklab, var(--color-accent), #000 25%);
}

.modal-mask {
    position: fixed;
    inset: 0;
    background: var(--mgmt-mask-bg);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
}

.modal-mask[aria-hidden="false"] {
    display: flex;
}

.modal-card {
    width: min(420px, 92vw);
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
}

.modal-head {
    padding: .9rem 1rem;
    border-bottom: 1px solid var(--color-border);
    font-weight: 600;
}

.modal-body {
    padding: 1rem;
    color: var(--color-text);
}

.modal-foot {
    padding: .75rem 1rem;
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: .5rem;
    justify-content: flex-end;
}

.modal-danger {
    color: var(--color-danger);
}

/* 行卡片自适应布局 */
.blog-row .grid {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: .6rem;
}

.status-badge {
    font-size: .8rem;
    border: 1px solid var(--color-border);
    padding: .1rem .4rem;
    border-radius: 6px;
}

/* 管理列表：一行一个卡片 */
#blogList {
    grid-template-columns: 1fr;
}

/* 修改密码区域 */
.change-password .grid {
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: .6rem;
    align-items: end;
}

.change-password label {
    display: block;
}

.change-password input[type="password"] {
    width: 100%;
}

.change-password .help {
    font-size: .85rem;
    color: var(--color-text);
    opacity: .75;
    grid-column: 1 / -1;
}

.form-actions {
    display: flex;
    gap: .5rem;
    justify-content: flex-end;
    margin-top: .75rem;
}

/* 列表展示视图（替代输入框编辑） */
.post-meta {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: .6rem;
    margin-top: .5rem;
}

.post-kv {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: .6rem .7rem;
}

.post-kv .k {
    display: block;
    font-size: .8rem;
    color: var(--muted, #666);
    margin-bottom: .25rem;
}

.post-kv .v {
    font-weight: 600;
    color: var(--color-text);
    word-break: break-word;
}

.post-kv .v.v-summary,
.post-kv .v.v-note {
    white-space: pre-wrap;
    /* 或者换成 pre-line 看你的需要 */
}

.blog-row .btn {
    padding: .4rem .7rem;
}

.blog-row .toolbar {
    display: flex;
    gap: .5rem;
    flex-wrap: wrap;
    margin-top: .5rem;
}

.status-badge.published {
    color: var(--mgmt-status-published-ink);
    border-color: color-mix(in oklab, var(--mgmt-status-published-ink), transparent var(--mgmt-status-border-alpha));
    background: color-mix(in oklab, var(--mgmt-status-published-ink), transparent var(--mgmt-status-bg-alpha));
}

.status-badge.hidden {
    color: var(--mgmt-status-hidden-ink);
    border-color: color-mix(in oklab, var(--mgmt-status-hidden-ink), transparent var(--mgmt-status-border-alpha));
    background: color-mix(in oklab, var(--mgmt-status-hidden-ink), transparent var(--mgmt-status-bg-alpha));
}

/* 编辑弹窗（覆盖接近全屏） */
.edit-mask {
    position: fixed;
    inset: 0;
    background: var(--mgmt-edit-mask-bg);
    display: none;
    z-index: 3000;
    align-items: center;
    justify-content: center;
}

.edit-mask[aria-hidden="false"] {
    display: flex;
}

.edit-panel {
    width: min(920px, 92vw);
    max-height: 92vh;
    overflow: auto;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    box-shadow: var(--shadow-lg, 0 10px 30px rgba(0, 0, 0, .25));
    /* 隐藏滚动条但保留滚动功能 */
    -ms-overflow-style: none;
    /* IE/旧版 Edge */
    scrollbar-width: none;
    /* Firefox */
}

/* WebKit 浏览器（Chrome/Safari/新 Edge）隐藏滚动条 */
.edit-panel::-webkit-scrollbar {
    width: 0;
    height: 0;
}

.edit-panel input,
.edit-panel textarea,
.edit-panel select {
    font-family: var(--font-sans);
}

/* 美化编辑面板中的上传文件控件（原生 file 按钮） */
#fMdFile {
    width: 100%;
    height: 2.6rem;
    padding: .35rem .5rem;
    border: 1px dashed var(--color-border);
    border-radius: 8px;
    background: var(--color-bg);
    transition: border-color .15s ease, box-shadow .15s ease;
    cursor: pointer;
}

#fMdFile:hover {
    border-color: color-mix(in oklab, var(--color-border), #000 12%);
}

#fMdFile:focus {
    outline: none;
    border-color: color-mix(in oklab, var(--color-border), #3b82f6 55%);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, .15);
}

/* 按钮子元素样式（现代浏览器） */
#fMdFile::file-selector-button {
    margin-right: .75rem;
    padding: .4rem .8rem;
    border: none;
    border-radius: 6px;
    background: var(--mgmt-file-button-bg);
    color: #fff;
    font-weight: 600;
    cursor: pointer;
}

#fMdFile::file-selector-button:hover {
    background: var(--mgmt-file-button-bg-hover);
}

#fMdFile::file-selector-button:active {
    background: var(--mgmt-file-button-bg-active);
}

/* 美化状态选择框 */
.edit-panel select#fStatus {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    height: 2.4rem;
    padding: 0 .75rem;
    padding-right: 2.2rem;
    /* 为箭头预留空间 */
    border: 1px solid var(--color-border);
    border-radius: 8px;
    background-color: var(--color-bg);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right .6rem center;
    background-size: 12px 12px;
    transition: border-color .15s ease, box-shadow .15s ease;
}

.edit-panel select#fStatus:hover {
    border-color: color-mix(in oklab, var(--color-border), #000 12%);
}

.edit-panel select#fStatus:focus {
    outline: none;
    border-color: color-mix(in oklab, var(--color-border), #3b82f6 55%);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, .15);
}

/* 根据值给出轻微的视觉提示 */
.edit-panel select#fStatus.is-published {
    border-color: #177245;
    background-color: #1772450f;
}

.edit-panel select#fStatus.is-hidden {
    border-color: #a15c00;
    background-color: #a15c000f;
}

.edit-head {
    padding: .9rem 1rem;
    border-bottom: 1px solid var(--color-border);
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 5;
    background: inherit;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.04);
}

.edit-body {
    padding: 1rem;
}

.edit-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: .75rem;
}

.edit-grid label {
    display: block;
}

.edit-foot {
    padding: .75rem 1rem;
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: .5rem;
    justify-content: flex-end;
    position: sticky;
    bottom: 0;
    background: inherit;
}

.close-x {
    border: none;
    background: transparent;
    font-size: 1.25rem;
    line-height: 1;
    cursor: pointer;
}

/* 表单校验提示 */
.field {
    display: block;
}

.field .hint {
    display: block;
    font-size: .8rem;
    color: var(--muted, #666);
    margin-top: .25rem;
}

.field .error {
    display: none;
    font-size: .8rem;
    color: var(--color-danger, #c00);
    margin-top: .25rem;
}

.field.invalid .error {
    display: block;
}

.field.invalid input,
.field.invalid textarea,
.field.invalid select {
    border-color: var(--color-danger, #c00);
    outline-color: var(--color-danger, #c00);
}

/* =====================
管理页面输入样式（仅作用于 .mgmt-wrapper 内）
===================== */
.mgmt-wrapper .grid label {
    display: grid;
    gap: .35rem;
    font-size: .9rem;
    color: var(--color-text-alt);
}

.mgmt-wrapper input[type="text"],
.mgmt-wrapper input[type="password"],
.mgmt-wrapper input[type="date"],
.mgmt-wrapper textarea,
.mgmt-wrapper select {
    width: 100%;
    border: 1px solid var(--color-border);
    background: var(--color-bg);
    color: var(--color-text);
    border-radius: var(--radius-sm);
    padding: .55rem .65rem;
    line-height: 1.4;
    transition: border-color .25s ease, box-shadow .25s ease, background-color .25s ease;
}

.mgmt-wrapper input[type="text"]:hover,
.mgmt-wrapper input[type="password"]:hover,
.mgmt-wrapper input[type="date"]:hover,
.mgmt-wrapper textarea:hover,
.mgmt-wrapper select:hover {
    border-color: var(--color-accent-hover);
}

.mgmt-wrapper input[type="text"]:focus,
.mgmt-wrapper input[type="password"]:focus,
.mgmt-wrapper input[type="date"]:focus,
.mgmt-wrapper textarea:focus,
.mgmt-wrapper select:focus {
    outline: none;
    border-color: var(--color-accent);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, .15);
}

.mgmt-wrapper input::placeholder,
.mgmt-wrapper textarea::placeholder {
    color: var(--color-text-alt);
    opacity: .8;
}

.mgmt-wrapper input:disabled,
.mgmt-wrapper textarea:disabled,
.mgmt-wrapper select:disabled {
    opacity: .7;
    cursor: not-allowed;
}

/* 深色模式下输入背景与描边对比 */
html[data-theme="dark"] .mgmt-wrapper input[type="text"],
html[data-theme="dark"] .mgmt-wrapper input[type="password"],
html[data-theme="dark"] .mgmt-wrapper input[type="date"],
html[data-theme="dark"] .mgmt-wrapper textarea,
html[data-theme="dark"] .mgmt-wrapper select {
    background: var(--color-bg-night);
    border-color: var(--color-border);
    color: var(--color-text);
}

/* =============主题切换渐变动画支持============ */
.theme-transition,
.theme-transition :where(*, *::before, *::after) {
    transition:
        background-color .55s cubic-bezier(.4, .2, .2, 1),
        color .45s cubic-bezier(.4, .2, .2, 1),
        border-color .55s cubic-bezier(.4, .2, .2, 1),
        box-shadow .55s cubic-bezier(.4, .2, .2, 1),
        background .65s cubic-bezier(.4, .2, .2, 1);
}

/* 对性能敏感或不需要主题过渡的元素显式禁用 */
.theme-transition :where(video, canvas, .no-theme-transition) {
    transition: none !important;
}